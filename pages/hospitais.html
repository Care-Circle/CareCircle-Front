<!DOCTYPE html>
<html lang="pt-br">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>CareCircle - Página do Usuário</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@500&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:wght@900&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="../styles/global.css">
        <link rel="stylesheet" href="../styles/reset.css">
        <link rel="stylesheet" href="../styles/user/style.css">
    </head>

    <body class="body--user">
        <header class="header">
            <nav class="navbar">
                <ul class="nav-list">
                    <li><a href="userHome.html" class="nav-link">Home</a></li>
                    <li><a href="ciclo.html" class="nav-link">Meu Ciclo</a></li>
                    <li><a href="grupos.html" class="nav-link">Grupos de Apoio</a></li>
                    <li class="active"><a href="hospitais.html" class="nav-link">Hospitais</a></li>
                    <li><a href="marcas.html" class="nav-link">Marcas Parceiras</a></li>
                    <li class="dropdown">
                        <a href="#" class="nav-link">Perfil</a>
                        <div class="dropdown-content">
                            <p>[Nome do Usuário]</p>
                            <a href="#">Configurações</a>
                            <button onclick="logout()">Logoff</button>
                        </div>
                    </li>
                </ul>
            </nav>
        </header>

        <!-- Seção Hospitais -->
        <section id="hospitais" class="content-section">
            <h3>Hospitais</h3>

            <div class="hospital-container">
                <!-- Barra de Pesquisa Lateral -->
                <div class="search-bar">
                    <input type="text" id="searchInput" placeholder="Pesquisar hospitais...">
                    <button onclick="searchHospitais()">Pesquisar</button>
                </div>

                <!-- Lista de Hospitais -->
                <div class="hospital-list">
                    <!-- Os resultados da pesquisa serão exibidos aqui -->
                </div>
            </div>

            <!-- Mapa do Google -->
            <div id="googleMap"></div>
        </section>


        <footer>
            <div class="footer-title">
                <h4>Integranetes:</h4>
            </div>
            <p>Mariana Spinola - RM553476</p>
            <p>Beatriz Silva - RM552600</p>
            <p>Kaua Almeida - RM552618</p>
        </footer>
        <script>
            var map;

            function logout () {
                window.location.href = "../index.html";
            }

            function searchHospitais () {
                var searchInput = document.getElementById( 'searchInput' ).value;

                var request = {
                    location: map.getCenter(),
                    radius: 5000, // Raio de pesquisa em metros (ajuste conforme necessário)
                    query: searchInput,
                    types: [ 'hospital' ]
                };

                var service = new google.maps.places.PlacesService( map );
                service.textSearch( request, function ( results, status ) {
                    if ( status == google.maps.places.PlacesServiceStatus.OK ) {
                        displayHospitais( results );
                    } else {
                        console.error( 'Erro ao pesquisar hospitais:', status );
                    }
                } );
            }

            function displayHospitais ( hospitais ) {
                var hospitalList = document.querySelector( '.hospital-list' );
                hospitalList.innerHTML = '';

                hospitais.forEach( function ( hospital ) {
                    var hospitalItem = document.createElement( 'div' );
                    hospitalItem.classList.add( 'hospital-item' );

                    var name = document.createElement( 'h4' );
                    name.textContent = hospital.name;

                    var address = document.createElement( 'p' );
                    address.textContent = hospital.formatted_address;

                    hospitalItem.appendChild( name );
                    hospitalItem.appendChild( address );
                    hospitalList.appendChild( hospitalItem );
                } );
            }

            function initMap () {
                map = new google.maps.Map( document.getElementById( 'googleMap' ), {
                    center: { lat: -34.397, lng: 150.644 },
                    zoom: 8
                } );
            }
        </script>
        <!-- Substitua 'SUA_CHAVE_API' pela sua chave de API -->
        <script defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBkN-ST3xZKu4q0RzWKrytVS85xUt0gzG0&libraries=places&callback=initMap"></script>

    </body>

</html>
